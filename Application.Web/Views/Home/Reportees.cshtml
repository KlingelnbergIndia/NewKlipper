@model dynamic

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <div>
        <div class="panel panel-info form-inline" style="@(Model.reportees.Count==0 ? "visibility:hidden" : "visibility:visible")">
            <div class="panel-heading">
                <label for="reporteesId">Select a Reportee</label>
                @using (Html.BeginForm("GetSelectedreportee", "Home", FormMethod.Post))
                {
                    <select id="reporteesId" name="selectMenu" class="form-control input-sm">
                        @if (Model.Name == string.Empty || Model.Name == null)
                        {
                            <option selected value="0" disabled>---Select Reportee---</option>
                        }
                        else
                        {
                            <option selected value=@Model.Name>@Model.Name</option>
                        }
                        @foreach (var item in Model.reportees)
                        {
                            if (item != Model.Name)
                            {
                                <option value=@item>@item</option>
                            }

                        }
                    </select>
                    <label for="from">From</label>
                    <input type="date" id="fromDate" name="fromDate" class="form-control input-sm"
                           value="@(Model.fromDate==string.Empty ? "dd-mm-yyyy" : Model.fromDate)" required>
                    <label for="to">to</label>
                    <input type="date" id="toDate" name="toDate" class="form-control input-sm" onkeydown="return false"
                           value="@(Model.toDate==string.Empty ? "dd-mm-yyyy" : Model.toDate)" required>
                    <input type="submit" value="Get Attendance Record" class="btn btn-default"/>
                }
            </div>
        </div>


        @if (Model.Name != string.Empty && Model.Name != null)
        {
            @if (Model.attendaceRecords.Count == 0)
            {
                <p class="text-warning">Attendance Records of @Model.Name for specified period are not available</p>
            }
            else
            {
                <p>Attendance Record of @Model.Name.Substring(0, Model.Name.LastIndexOf('-'))</p>

                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Day</th>
                            <th>Time In</th>
                            <th>Time Out</th>
                            <th>Late By</th>
                            <th>OverTime</th>
                            <th>Total Working Hours</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.attendaceRecords)
                        {
                            string lateByClass = "alert alert-danger";
                            string overTimeClass = "alert alert-success";

                            <tr>
                                <td style="vertical-align: text-top;">@item.Date.ToString("dd MMMM yyyy")</td>
                                <td>@item.Date.ToString("dddd")</td>
                                <td>@item.TimeIn.Hour.ToString("D2") : @item.TimeIn.Minute.ToString("D2")</td>
                                @if (item.TimeOut.Hour == 0 && item.TimeOut.Minute == 0)
                                {
                                    <td>-</td>
                                }
                                else
                                {
                                    <td>@item.TimeOut.Hour.ToString("D2"):@item.TimeOut.Minute.ToString("D2")</td>
                                }
                                @if (item.LateBy.Hour == 0 && item.LateBy.Minute == 0)
                                {
                                    <td>-</td>
                                }
                                else
                                {
                                    <td class="@lateByClass">@item.LateBy.Hour.ToString("D2"):@item.LateBy.Minute.ToString("D2")</td>
                                }
                                @if (item.OverTime.Hour == 0 && item.OverTime.Minute == 0)
                                {
                                    <td>-</td>
                                }
                                else
                                {
                                    <td class="@overTimeClass">@item.OverTime.Hour.ToString("D2"):@item.OverTime.Minute.ToString("D2")</td>
                                }
                                <td>@item.WorkingHours.Hour.ToString("D2"):@item.WorkingHours.Minute.ToString("D2")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        }
    </div>


</body>
</html>

