
@model Application.Web.Models.LeaveViewModel
@{
    var leaveTypes = @Model.GetAllLeaveTypes();
}
<body>
    <div class="modal fade" id="UpdateAddedCompOffModal" role="dialog">
        <div class="modal-dialog modal-sm" style="width:400px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title"> Update Comp-Off</h3>
                </div>
                <div id="ModalBody" style="margin-left:9px;margin-right:10px">
                    <form method="post" asp-action="UpdateAddedCompOff" asp-controller="Leave">
                    <div class="col-md-12">
                        <input type="hidden" id="leaveid" name="leaveId"/>
                        <div class="col-md-6" style="margin-top:8px;">
                            <label for="from">From</label>
                            <input type="date" id="from" class="form-control input-sm"
                                   value=""
                                   min="@DateTime.Today.AddYears(-1).ToString("yyyy-MM-dd")"
                                   max="@DateTime.Today.AddYears(1).ToString("yyyy-MM-dd")"
                                   asp-for="@Model.FromDate"
                                   style="width:150px;"
                                   required>
                        </div>
                        <div class="col-md-6" style="margin-top:8px;">
                            <label for="to">To</label>
                            <input type="date" id="to" class="form-control input-sm"
                                   min="@DateTime.Today.AddYears(-1).ToString("yyyy-MM-dd")"
                                   max="@DateTime.Today.AddYears(1).ToString("yyyy-MM-dd")"
                                   style="width:150px;"
                                   asp-for="@Model.ToDate"
                                   required>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label>Remark</label>
                                <textarea asp-for="@Model.Remark" class="form-control input-sm" id="remarks" placeholder="Remark" rows="6" required></textarea>
                                <span asp-validation-for="@Model.Remark" class="text-danger input-sm"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="submit" value="submit" class="btn btn-default btn-info pull-right"/>
                        </div>
                    </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <div class="form-group">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            var _convertStringToDateObject;


            UpdateAddedCompOff = function (leaveId, fromDate, toDate, remark, isrealized, isCancelledLeave) {
                if (isrealized == "true") {
                    alert('Passed leaves can not be updated !');
                    return false;
                }
                if (isCancelledLeave == "true"){
                    alert('Cancelled leaves can not be updated !');
                    return false;
                }

                $('#UpdateAddedCompOffModal').modal({ 'show': true, 'backdrop': true });
                document.getElementById("from").value = convertDateToHtmlFormat(new Date(fromDate));
                document.getElementById("to").value = convertDateToHtmlFormat(new Date(toDate));
                document.getElementById("leaveid").value = leaveId;
                document.getElementById("remarks").value = decodeString(remark);
            }

        });
    </script>
</body>
<script src="~/js/common.helpers.js"></script>
<link href="~/css/_ApplyLeavePagePopup.css" rel="stylesheet" />
<script src="~/js/common.Leave.js"></script>

